(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{GfNC:function(l,n,t){"use strict";t.r(n);var o=t("8Y7J"),e=t("mrSG"),i=t("gTw3"),a=t("ZZ/e"),u=t("gWzw");class r{constructor(l,n,t,o){this.geolocation=l,this.loadingController=n,this.alertController=t,this.usuarioService=o,this.map=null,this.filtro="Ecuador",this.latitudee="",this.longitudee="",this.timestamp="",this._ubicacion={},this.markers=[],this.latitude=null,this.longitude=null}ngOnInit(){this.loadMap()}guardarUBi(){return e.b(this,void 0,void 0,function*(){this.nome_token_user=localStorage.getItem("miCuenta.nome_token"),this.usuarioService.ubicacion(this.nome_token_user,this._ubicacion).subscribe(l=>{},l=>{});const l=yield this.alertController.create({header:"Alerta!",message:"Desea Guardar la ubicacion Actual?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel: blah")}},{text:"Ok",handler:()=>{console.log("Ubicacion Guardada...")}}]});yield l.present()})}loadMap(){return e.b(this,void 0,void 0,function*(){const l=yield this.loadingController.create({message:"espere por favor...",spinner:"bubbles",duration:3e3});l.present();const n=yield this.getLocation();console.log("coordenadas de inicio",n);const t=document.getElementById("map");this.map=new google.maps.Map(t,{center:n,zoom:15}),google.maps.event.addListenerOnce(this.map,"idle",t=>{l.dismiss(),this.addMarker(n.lat,n.lng,google)}),google.maps.event.addListener(this.map,"click",l=>{console.log("otra coordenada",l.latLng);const n=l.latLng.lat(),t=l.latLng.lng();this.hola(n,t,google)})})}hola(l,n,t){return e.b(this,void 0,void 0,function*(){const o=yield this.alertController.create({header:"Esta seguro?",message:"que desea agregar esta ubicacion",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{console.log("confirmar salida")}},{text:"Ok",handler:()=>{this.addMarker(l,n,t)}}]});yield o.present()})}addMarker(l,n,t){console.log(l,n);const o=new t.maps.Marker({position:{lat:l,lng:n},zoom:8,map:this.map,title:"Mi Ubicacion",animation:t.maps.Animation.BOUNCE});this._ubicacion.latitud=l,this._ubicacion.longitud=n,console.log(this._ubicacion),this.markers.forEach((l,n)=>{l.setMap(null)}),this.markers.push(o),t.maps.event.addListener(o,"click",function(){this.map.setZoom(17),this.map.setCenter(o.getPosition())}),t.maps.event.addListener(o,"dblclick",function(){o.setMap(null)})}getLocation(){return e.b(this,void 0,void 0,function*(){const l=yield this.geolocation.getCurrentPosition();return{lat:l.coords.latitude,lng:l.coords.longitude}})}getLocationSearch(){return e.b(this,void 0,void 0,function*(){return(yield this.geolocation.watchPosition()).subscribe(l=>{console.log(l),this.latitude=l.coords.latitude,this.longitude=l.coords.longitude}),{lat:this.latitude,lng:this.longitude}})}onSearchChange(l){}}class s{}var c=t("pMnS"),d=t("oBZk"),b=o.pb({encapsulation:0,styles:[["#map[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function h(l){return o.Mb(0,[(l()(),o.rb(0,0,null,null,11,"ion-header",[["no-border",""]],null,null,null,d.W,d.m)),o.qb(1,49152,null,0,a.B,[o.h,o.k,o.x],null,null),(l()(),o.rb(2,0,null,0,9,"ion-toolbar",[["color","cruz-primary"]],null,null,null,d.tb,d.J)),o.qb(3,49152,null,0,a.Cb,[o.h,o.k,o.x],{color:[0,"color"]},null),(l()(),o.rb(4,0,null,0,2,"ion-title",[],null,null,null,d.sb,d.I)),o.qb(5,49152,null,0,a.Ab,[o.h,o.k,o.x],null,null),(l()(),o.Kb(-1,0,["Ubicacion"])),(l()(),o.rb(7,0,null,0,4,"ion-buttons",[["slot","end"]],null,null,null,d.O,d.e)),o.qb(8,49152,null,0,a.l,[o.h,o.k,o.x],null,null),(l()(),o.rb(9,0,null,0,2,"ion-back-button",[["icon","arrow-back"]],null,[[null,"click"]],function(l,n,t){var e=!0;return"click"===n&&(e=!1!==o.Db(l,11).onClick(t)&&e),e},d.M,d.c)),o.qb(10,49152,null,0,a.g,[o.h,o.k,o.x],{defaultHref:[0,"defaultHref"],icon:[1,"icon"]},null),o.qb(11,16384,null,0,a.h,[[2,a.ib],a.Jb],{defaultHref:[0,"defaultHref"]},null),(l()(),o.rb(12,0,null,null,3,"ion-content",[],null,null,null,d.T,d.j)),o.qb(13,49152,null,0,a.u,[o.h,o.k,o.x],null,null),(l()(),o.rb(14,0,null,0,0,"input",[["id","search"],["type","hidden"]],null,null,null,null,null)),(l()(),o.rb(15,0,null,0,0,"div",[["id","map"]],null,null,null,null,null))],function(l,n){l(n,3,0,"cruz-primary"),l(n,10,0,null,"arrow-back"),l(n,11,0,null)},null)}function g(l){return o.Mb(0,[(l()(),o.rb(0,0,null,null,1,"app-ubicacion",[],null,null,null,h,b)),o.qb(1,114688,null,0,r,[i.a,a.Gb,a.a,u.a],null,null)],function(l,n){l(n,1,0)},null)}var p=o.nb("app-ubicacion",r,g,{},{},[]),m=t("SVse"),k=t("s7LF"),f=t("iInd");t.d(n,"UbicacionPageModuleNgFactory",function(){return v});var v=o.ob(s,[],function(l){return o.Ab([o.Bb(512,o.j,o.Z,[[8,[c.a,p]],[3,o.j],o.v]),o.Bb(4608,m.l,m.k,[o.s,[2,m.r]]),o.Bb(4608,k.t,k.t,[]),o.Bb(4608,a.b,a.b,[o.x,o.g]),o.Bb(4608,a.Ib,a.Ib,[a.b,o.j,o.p]),o.Bb(4608,a.Lb,a.Lb,[a.b,o.j,o.p]),o.Bb(1073742336,m.b,m.b,[]),o.Bb(1073742336,k.s,k.s,[]),o.Bb(1073742336,k.g,k.g,[]),o.Bb(1073742336,a.Eb,a.Eb,[]),o.Bb(1073742336,f.q,f.q,[[2,f.v],[2,f.m]]),o.Bb(1073742336,s,s,[]),o.Bb(1024,f.k,function(){return[[{path:"",component:r}]]},[])])})}}]);