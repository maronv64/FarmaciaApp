{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{GfNC:function(n,t,l){\"use strict\";l.r(t);var e=l(\"CcnG\"),o=l(\"mrSG\"),i=l(\"gTw3\"),u=l(\"ZZ/e\"),a=l(\"gWzw\"),r=function(){function n(n,t,l,e){this.geolocation=n,this.loadingController=t,this.alertController=l,this.usuarioService=e,this.map=null,this.filtro=\"Ecuador\",this.latitudee=\"\",this.longitudee=\"\",this.timestamp=\"\",this._ubicacion={},this.markers=[],this.latitude=null,this.longitude=null}return n.prototype.ngOnInit=function(){this.loadMap()},n.prototype.guardarUBi=function(){return o.b(this,void 0,void 0,function(){return o.e(this,function(n){switch(n.label){case 0:return this.nome_token_user=localStorage.getItem(\"miCuenta.nome_token\"),this.usuarioService.ubicacion(this.nome_token_user,this._ubicacion).subscribe(function(n){},function(n){}),[4,this.alertController.create({header:\"Alerta!\",message:\"Desea Guardar la ubicacion Actual?\",buttons:[{text:\"Cancel\",role:\"cancel\",cssClass:\"secondary\",handler:function(){console.log(\"Confirm Cancel: blah\")}},{text:\"Ok\",handler:function(){console.log(\"Ubicacion Guardada...\")}}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}})})},n.prototype.loadMap=function(){return o.b(this,void 0,void 0,function(){var n,t,l,e=this;return o.e(this,function(o){switch(o.label){case 0:return[4,this.loadingController.create({message:\"espere por favor...\",spinner:\"bubbles\",duration:3e3})];case 1:return(n=o.sent()).present(),[4,this.getLocation()];case 2:return t=o.sent(),console.log(\"coordenadas de inicio\",t),l=document.getElementById(\"map\"),this.map=new google.maps.Map(l,{center:t,zoom:15}),google.maps.event.addListenerOnce(this.map,\"idle\",function(l){n.dismiss(),e.addMarker(t.lat,t.lng,google)}),google.maps.event.addListener(this.map,\"click\",function(n){console.log(\"otra coordenada\",n.latLng);var t=n.latLng.lat(),l=n.latLng.lng();e.hola(t,l,google)}),[2]}})})},n.prototype.hola=function(n,t,l){return o.b(this,void 0,void 0,function(){var e=this;return o.e(this,function(o){switch(o.label){case 0:return[4,this.alertController.create({header:\"Esta seguro?\",message:\"que desea agregar esta ubicacion\",buttons:[{text:\"Cancelar\",role:\"cancel\",cssClass:\"secondary\",handler:function(){console.log(\"confirmar salida\")}},{text:\"Ok\",handler:function(){e.addMarker(n,t,l)}}]})];case 1:return[4,o.sent().present()];case 2:return o.sent(),[2]}})})},n.prototype.addMarker=function(n,t,l){console.log(n,t);var e=new l.maps.Marker({position:{lat:n,lng:t},zoom:8,map:this.map,title:\"Mi Ubicacion\",animation:l.maps.Animation.BOUNCE});this._ubicacion.latitud=n,this._ubicacion.longitud=t,console.log(this._ubicacion),this.markers.forEach(function(n,t){n.setMap(null)}),this.markers.push(e),l.maps.event.addListener(e,\"click\",function(){this.map.setZoom(17),this.map.setCenter(e.getPosition())}),l.maps.event.addListener(e,\"dblclick\",function(){e.setMap(null)})},n.prototype.getLocation=function(){return o.b(this,void 0,void 0,function(){var n;return o.e(this,function(t){switch(t.label){case 0:return[4,this.geolocation.getCurrentPosition()];case 1:return[2,{lat:(n=t.sent()).coords.latitude,lng:n.coords.longitude}]}})})},n.prototype.getLocationSearch=function(){return o.b(this,void 0,void 0,function(){var n=this;return o.e(this,function(t){switch(t.label){case 0:return[4,this.geolocation.watchPosition()];case 1:return t.sent().subscribe(function(t){console.log(t),n.latitude=t.coords.latitude,n.longitude=t.coords.longitude}),[2,{lat:this.latitude,lng:this.longitude}]}})})},n.prototype.onSearchChange=function(n){},n}(),s=function(){return function(){}}(),c=l(\"pMnS\"),b=l(\"oBZk\"),d=e.rb({encapsulation:0,styles:[[\"#map[_ngcontent-%COMP%]{width:100%;height:100%}\"]],data:{}});function h(n){return e.Ob(0,[(n()(),e.tb(0,0,null,null,11,\"ion-header\",[[\"no-border\",\"\"]],null,null,null,b.W,b.m)),e.sb(1,49152,null,0,u.B,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,9,\"ion-toolbar\",[[\"color\",\"cruz-primary\"]],null,null,null,b.tb,b.J)),e.sb(3,49152,null,0,u.Cb,[e.h,e.k,e.z],{color:[0,\"color\"]},null),(n()(),e.tb(4,0,null,0,2,\"ion-title\",[],null,null,null,b.sb,b.I)),e.sb(5,49152,null,0,u.Ab,[e.h,e.k,e.z],null,null),(n()(),e.Mb(-1,0,[\"Ubicacion\"])),(n()(),e.tb(7,0,null,0,4,\"ion-buttons\",[[\"slot\",\"end\"]],null,null,null,b.O,b.e)),e.sb(8,49152,null,0,u.l,[e.h,e.k,e.z],null,null),(n()(),e.tb(9,0,null,0,2,\"ion-back-button\",[[\"icon\",\"arrow-back\"]],null,[[null,\"click\"]],function(n,t,l){var o=!0;return\"click\"===t&&(o=!1!==e.Fb(n,11).onClick(l)&&o),o},b.M,b.c)),e.sb(10,49152,null,0,u.g,[e.h,e.k,e.z],{defaultHref:[0,\"defaultHref\"],icon:[1,\"icon\"]},null),e.sb(11,16384,null,0,u.h,[[2,u.ib],u.Jb],{defaultHref:[0,\"defaultHref\"]},null),(n()(),e.tb(12,0,null,null,3,\"ion-content\",[],null,null,null,b.T,b.j)),e.sb(13,49152,null,0,u.u,[e.h,e.k,e.z],null,null),(n()(),e.tb(14,0,null,0,0,\"input\",[[\"id\",\"search\"],[\"type\",\"hidden\"]],null,null,null,null,null)),(n()(),e.tb(15,0,null,0,0,\"div\",[[\"id\",\"map\"]],null,null,null,null,null))],function(n,t){n(t,3,0,\"cruz-primary\"),n(t,10,0,null,\"arrow-back\"),n(t,11,0,null)},null)}function p(n){return e.Ob(0,[(n()(),e.tb(0,0,null,null,1,\"app-ubicacion\",[],null,null,null,h,d)),e.sb(1,114688,null,0,r,[i.a,u.Gb,u.a,a.a],null,null)],function(n,t){n(t,1,0)},null)}var g=e.pb(\"app-ubicacion\",r,p,{},{},[]),f=l(\"Ip0R\"),m=l(\"gIcY\"),k=l(\"ZYCi\");l.d(t,\"UbicacionPageModuleNgFactory\",function(){return v});var v=e.qb(s,[],function(n){return e.Cb([e.Db(512,e.j,e.bb,[[8,[c.a,g]],[3,e.j],e.x]),e.Db(4608,f.l,f.k,[e.u,[2,f.r]]),e.Db(4608,m.t,m.t,[]),e.Db(4608,u.b,u.b,[e.z,e.g]),e.Db(4608,u.Ib,u.Ib,[u.b,e.j,e.q]),e.Db(4608,u.Lb,u.Lb,[u.b,e.j,e.q]),e.Db(1073742336,f.b,f.b,[]),e.Db(1073742336,m.s,m.s,[]),e.Db(1073742336,m.g,m.g,[]),e.Db(1073742336,u.Eb,u.Eb,[]),e.Db(1073742336,k.q,k.q,[[2,k.v],[2,k.m]]),e.Db(1073742336,s,s,[]),e.Db(1024,k.k,function(){return[[{path:\"\",component:r}]]},[])])})}}]);","extractedComments":[]}